<!DOCTYPE html>
    <head>
        <!--jQuery References-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js" type="text/javascript"></script>

        <!--Wijmo Widgets JavaScript-->
        <script src="http://cdn.wijmo.com/jquery.wijmo-open.all.2.2.2.min.js" type="text/javascript"></script>
        <script src="http://cdn.wijmo.com/jquery.wijmo-complete.all.2.2.2.min.js" type="text/javascript"></script>

        <!--Wijmo Widgets CSS-->
        <link href="http://cdn.wijmo.com/jquery.wijmo-complete.all.2.2.2.min.css" rel="stylesheet" type="text/css" />
        <!--Theme-->
        <link href="http://cdn.wijmo.com/themes/metro/jquery-wijmo.css" rel="stylesheet" type="text/css" title="rocket-jqueryui" />

        <!--Knockout JS Library-->
        <script src="http://cdn.wijmo.com/external/knockout-2.0.0.js" type="text/javascript"></script>
        <!--Wijmo Knockout Integration Library-->
        <script src="http://cdn.wijmo.com/external/knockout.wijmo.js" type="text/javascript"></script>
    </head>
    <body>
        <style type="text/css">
            .wijmo-wijgrid
            {
                min-height: 100px;
                width: 700px;
            }
        </style>

        <script id="scriptInit">
            var usersViewModel = function() {
                var self = this;

                self.usersData = ko.observableArray([{
                    "id": 1,
                    "fullname": "Vladislav Romenko",
                    "name": "Vlad",
                    "login": "vladislav",
                    "mobile": "+3725013456",
                    "email": "vladislav@rogakopita.ee",
                    "type": "user",
                    "status": "active"
                },{
                    "id": 3,
                    "fullname": "Denis Mighty",
                    "name": "Denis",
                    "login": "denis",
                    "mobile": "+3725123457",
                    "email": "denis@rogakopita.ee",
                    "type": "superuser",
                    "status": "active"
                },{
                    "id": 2,
                    "fullname": "Michael Toomert",
                    "name": "Michael",
                    "login": "michael",
                    "mobile": "+3725088620",
                    "email": "michael@rogakopita.ee",
                    "type": "user",
                    "status": "active"
                }]);

                self.id = ko.observable(1);
                self.fullname = ko.observable();
                self.shortName = ko.observable();
                self.login = ko.observable();
                self.password = ko.observable();
                self.email = ko.observable();
                self.mobile = ko.observable();
                self.type = ko.observable();
                self.userDisabled = ko.observable(false);
            };

            function onSelectionChanged() {
                var selectedRow = $("#tableUsers").wijgrid("selection").selectedCells();
                console.log("onSelectionChanged " + selectedRow.item(0).value().toString());

//                usersViewModel.id = selectedRow.item(0).value().toString();
//                usersViewModel.fullname = selectedRow.item(1).value();
//                usersViewModel.name = selectedRow.item(2).value();
//                usersViewModel.login = selectedRow.item(3).value();
//                usersViewModel.mobile = selectedRow.item(4).value();
//                usersViewModel.email = selectedRow.item(5).value();
//                usersViewModel.type = selectedRow.item(6).value();
//                usersViewModel.userDisabled = selectedRow.item(7).value();
            };

            $(document).ready(function () {
                ko.applyBindings(new usersViewModel());

            });
        </script>

        <div class="container">
            <div class="header">
                <h2>
                    Users list</h2>
            </div>
            <div class="userlist">
                <table id="tableUsers" data-bind="wijgrid: { data: usersData,
                    columns: [
                        { headerText: 'ID', width: 50, dataType: 'number', dataFormatString: 'n0', visible: false },
                        { headerText: 'Name', width: 150 },
                        { headerText: 'Nickname', width: 100 },
                        { headerText: 'Login', width: 100, visible: false },
                        { headerText: 'Mobile number', width: 100, visible: false },
                        { headerText: 'Email', width: 150, visible: false },
                        { headerText: 'Type', width: 50 },
                        { headerText: 'Status', width: 50 }
                    ],
                    selectionChanged: onSelectionChanged }">
                </table>
            </div>
            <div class="userdetails">
                <hr>
                <label for="userId">ID: </label><input type="text" id="userId" data-bind="wijinputnumber: { data: id, disabled: true }"/>
                <label for="userFullname">Fullname: </label><input type="text" id="userFullname" data-bind="wijtextbox: { data: fullname }" required/>
                <label for="userShortname">Short name: </label><input type="text" id="userShortname" data-bind="wijtextbox: { data: shortName }" required/><br>
                <label for="userMobile">Mobile number: </label><input type="text" id="userMobile" data-bind="wijtextbox: { data: mobile }"/>
                <label for="userEmail">Email: </label><input type="text" id="userEmail" data-bind="wijtextbox: { data: email }"/><br>
                <label for="userLogin">Login: </label><input type="text" id="userLogin" data-bind="wijtextbox: { data: login }" required/>
                <label for="userPassword">Password: </label><input type="text" id="userPassword" data-bind="wijtextbox: { data: password }" disabled="disabled" required/><br>
                <label for="userType">User type: </label><select id="userType" data-bind="wijdropdown: { data: type }">
                    <option value="1" selected="selected">user</option>
                    <option value="2">superuser</option>
                </select>
                <!--<label for="userDisabled">Disabled: </label><input type="checkbox" id="userDisabled" data-bind="wijcheckbox: { checked: userDisabled }"/><br>-->
				<br>
                <input id="buttonAddUser" name="buttonAddUser" type="button" value="Add new user">
                <input id="buttonSave" name="buttonSave" type="button" value="Save changes">
                <input id="buttonNewPassword" name="buttonNewPassword" type="button" value="Generate new password">
                <input id="buttonDeactivate" name="buttonDeactivate" type="button" value="Deactive user">
                <input id="buttonDeleteUser" name="buttonDeleteUser" type="button" value="Delete user">
            </div>
        </div>
    </body>
</html>
